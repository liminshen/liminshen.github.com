<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<input type="file" id="file" accept="image/*">
	<img src="" alt="">
	<script>
		function dir(objImg) {//计算起点宽高
			var naW = objImg.naturalWidth,
				naH = objImg.naturalHeight;
			var d = naW - naH;
			var result = {};
			if(d>0){
				result.size = [naH,naH];
				result.point = [Math.abs(d/2),0];
			}else{
				result.size = [naW,naW];
				result.point = [0,Math.abs(d/2)];
			}
			result.size = result.size.join('*');
			result.point = '+'+result.point.join('+');
			return result;
		}
		
		function readerFile (files,cb){//读取file引入文件 回调函数输出结果
			var reader = new FileReader();
			var img = document.querySelector('img');
			var result = null;
			reader.addEventListener('load',function (e) {
				img.src = e.currentTarget.result;
				img.onload = function () {
					result = dir(img);
					cb(result);
				}
			},false);
			reader.addEventListener('loadend',function () {
				console.log('end');
			});
			reader.readAsDataURL(files);
		}

		var file = document.querySelector('#file');
		file.addEventListener('change',function (ev) {
			var files = ev.target.files[0];

			readerFile(files,function(res){
				console.log(res);
			});

		});
	</script>
</body>
</html>